# Miose 的脚本小屋 🐾

这里是 KroMiose 收集和编写的各种常用脚本，希望能让你的生活更轻松！(ฅ'ω'ฅ)

## ⚠️ 免责声明 (Disclaimer)

本仓库中的所有脚本都经过了作者的测试，但我们无法保证它们在所有系统和环境下都能完美运行。脚本的执行可能会修改你的系统文件和配置。

**在运行任何脚本之前，请你：**

1. **充分理解脚本的用途和功能。**
2. **仔细阅读脚本的源代码。**
3. **在非生产环境或虚拟机中进行测试。**

因使用本仓库脚本而导致的任何数据丢失或系统损坏，作者概不负责。你对执行这些脚本的所有后果负全部责任。

## 仓库结构

为了方便管理，所有脚本都按照操作系统分类存放在不同的目录中。

- `linux/` - 存放适用于 Linux 系统的脚本。
- `macos/` - (规划中) 存放适用于 macOS 系统的脚本。
- `windows/` - (规划中) 存放适用于 Windows 系统的脚本。

## 脚本列表

---

### 🐧 Linux

#### 📂 `setup_en_dirs.sh`

这个脚本可以帮助你在一个全新的、语言设置为中文的 Linux 系统上，将家目录下的"桌面"、"文档"、"下载"等文件夹的名字从中文替换为标准的英文名（如 `Desktop`, `Documents`, `Downloads`），并帮你把旧文件夹里的东西都搬到新家。

- **✨ 主要功能:**

  - 自动将主要的 XDG 用户目录从中文重命名为英文。
  - 迁移旧中文目录下的所有文件到新的英文目录。
  - 禁用系统在下次登录时自动改回中文目录的功能。
  - 操作前会智能备份你老的配置文件，很安全哦。

- **💻 支持系统:**

  - 基于 Debian/Ubuntu 的发行版 (例如 Ubuntu, Debian, Linux Mint, Deepin 等)。

- **💣 执行副作用:**

  - **修改用户配置:** 覆盖 `~/.config/user-dirs.dirs` 文件，并将其旧内容备份为 `~/.config/user-dirs.dirs.bak`。
  - **修改系统配置:** 修改 `/etc/xdg/user-dirs.conf` 文件，将 `enabled=True` 改为 `enabled=False`，以禁止系统自动更新用户目录语言。
  - **文件与目录操作:**
    - 在家目录下创建新的英文标准目录（如 `~/Desktop`, `~/Downloads` 等）。
    - 将旧中文目录下的所有文件和子目录移动到对应的英文目录中。
    - 移动成功后，删除原先的空中文目录。

- **🔁 可重复执行性:**

  - 本脚本是**可重复执行的**。第一次运行后，所有中文目录将被替换。后续重复运行会检查并发现中文目录已不存在，不会执行任何破坏性操作，因此是完全安全的。

- **🚀 一键执行:**

  > 你无需克隆本仓库，可以直接在终端中运行以下命令来执行脚本。

  ```bash
  sudo bash -c "$(curl -fsSL https://raw.githubusercontent.com/KroMiose/scripts/main/linux/setup_en_dirs.sh)"
  ```

  脚本会自动检测并为你完成所有配置。完成后，请务必**注销并重新登录**系统，以使所有更改生效！

---

#### 🔑 `setup_ssh_access.sh`

在新服务器上为当前用户一键配置好 SSH 免密登录。它会创建一个专用的密钥对，将公钥自动配置好，然后把**私钥**显示出来让你带走。

- **✨ 主要功能:**

  - 创建一个专用的、一次性的 SSH 密钥对 (例如 `~/.ssh/access_key_my-server`)，而不是动你已有的 `id_rsa`。
  - 自动将新生成的公钥添加到 `~/.ssh/authorized_keys` 文件中。
  - 保证 SSH 目录和相关文件的权限正确无误 (`700` for `.ssh`, `600` for `authorized_keys`)。
  - 最后，它会清晰地打印出可用的**私钥**以及详细的登录指令。

- **💻 支持系统:**

  - 所有主流 Linux 发行版及 macOS。

- **💣 执行副作用:**

  - **创建或修改文件:**
    - 在 `~/.ssh/` 目录下创建 `access_key_<hostname>` (私钥) 和 `access_key_<hostname>.pub` (公钥)，其中 `<hostname>` 是服务器短名称。
    - 创建或向 `~/.ssh/authorized_keys` 文件追加公钥内容。

- **🔁 可重复执行性:**

  - 本脚本是**完全可重复执行的**。如果专用密钥和授权配置已存在，脚本会跳过创建步骤，直接显示已配置好的私钥和登录信息，不会造成任何影响。

- **🚀 一键执行:**

  > 此脚本不需要 sudo 权限。它会自动为你打理好一切。

  ```bash
  bash -c "$(curl -fsSL https://raw.githubusercontent.com/KroMiose/scripts/main/linux/setup_ssh_access.sh)"
  ```

---

#### ⚙️ `add_ssh_config.sh`

这是一个在您的**本地计算机**或**控制端**上运行的交互式脚本。它可以帮助您快速地将一个新服务器的连接信息添加到 `~/.ssh/config` 文件中，让您之后可以通过一个简单的别名 (如 `ssh my-server`) 直接登录。

- **✨ 主要功能:**

  - **交互式向导:** 通过提问引导您输入服务器的别名、IP、用户名和私钥文件路径。
  - **支持自定义端口:** 会询问服务器端口，默认为 22。
  - **智能去重:** 在添加前会检查该别名是否已存在，并询问您是否要覆盖，避免重复配置。
  - **自动配置:** 将您输入的信息格式化为标准的 `Host` 块，并安全地写入 `~/.ssh/config`。
  - **最佳实践:** 自动添加 `IdentitiesOnly yes` 选项，这是一个很好的安全习惯。

- **💻 支持系统:**

  - 所有主流 Linux 发行版及 macOS。

- **💣 执行副作用:**

  - **创建或修改文件:**
    - 如果 `~/.ssh/config` 文件不存在，会为您创建它。
    - 会向 `~/.ssh/config` 文件中追加或覆盖一个 `Host` 配置块。
    - 在覆盖配置前，会自动创建一个时间戳备份文件 (如 `config.bak.166...`)。

- **🔁 可重复执行性:**

  - 本脚本是**可重复执行的**。您可以反复运行它来添加不同的服务器配置。如果遇到已存在的别名，它会请求您的确认，因此是安全的。

- **🚀 一键执行:**

  > 在您的本地计算机上运行此命令，它会引导您完成配置。

  ```bash
  bash -c "$(curl -fsSL https://raw.githubusercontent.com/KroMiose/scripts/main/linux/add_ssh_config.sh)"
  ```

---

#### 🚀 `setup_zsh_p10k.sh`

一键为您配置一个功能强大且外观酷炫的 Zsh 终端环境。它会自动处理 `git`, `curl`, `zsh` 的安装，配置 Oh My Zsh，并**可选地**安装 Powerlevel10k 主题以及两个必备插件。

- **✨ 主要功能:**

  - **依赖全自动处理:** 自动检测并使用系统的包管理器 (apt, dnf, yum, pacman, brew) 安装 `git`, `curl`, `zsh` 等核心依赖。
  - **交互式选项:** 脚本开始时会询问您是否要安装 P10k 主题和插件，您可以按需选择。
  - **全自动安装 (根据您的选择):**
    - 安装 Oh My Zsh 框架。
    - 安装 Powerlevel10k 主题，这是目前最受欢迎和强大的 Zsh 主题之一。
    - 安装 `zsh-autosuggestions` 插件，它会根据历史记录智能提示你可能想输入的命令。
    - 安装 `zsh-syntax-highlighting` 插件，它能让你的命令输入拥有像代码编辑器一样的高亮效果。
  - **智能配置:**
    - 自动在 `.zshrc` 中启用主题和插件。
    - 脚本会巧妙地设置，让你在第一次打开 Zsh 时，自动进入 Powerlevel10k 的交互式配置向导。
  - **清晰的用户指引:** 脚本结束后会告诉你后续步骤，包括如何安装推荐的字体和重载配置。
  - **设置默认 Shell:** 脚本的最后，会询问您是否希望将 Zsh 设置为您的默认登录 Shell。

- **💻 支持系统:**

  - 所有主流 Linux 发行版 (Debian/Ubuntu, RHEL/CentOS, Arch) 及 macOS。

- **💣 执行副作用:**

  - **系统级变更:** 如果依赖缺失，脚本会请求 `sudo` 权限来安装软件包。
  - **文件与目录操作:**
    - 下载并安装 Oh My Zsh 到 `~/.oh-my-zsh`。
    - 下载主题和插件到 `~/.oh-my-zsh/custom/` 目录下。
  - **修改用户配置:**
    - 如果您没有 `.zshrc` 文件，Oh My Zsh 的安装过程会创建一个。
    - 脚本会修改 `~/.zshrc` 文件来设置主题和启用插件，操作前会创建 `.zshrc.bak` 备份。

- **🔁 可重复执行性:**

  - 本脚本是**可重复执行的**。它会检查每一个组件是否已存在，如果已存在则会跳过安装，不会重复执行，非常安全。

- **🚀 一键执行:**

  > 此脚本不应使用 sudo 运行。它会配置好您当前用户的 Zsh 环境。

  ```bash
  bash -c "$(curl -fsSL https://raw.githubusercontent.com/KroMiose/scripts/main/linux/setup_zsh_p10k.sh)"
  ```

---

> ✨ 更多好用的脚本正在制作中，敬请期待！
