# å¸¸ç”¨å‘½ä»¤å¤‡å¿˜å½• (Common Commands Cheatsheet) ğŸ“š

è¿™é‡Œæ˜¯ KroMiose å¶å°”ä¼šç»å¸¸ç”¨åˆ°çš„ä¸€äº›å‘½ä»¤ç‰‡æ®µï¼Œæ•´ç†åœ¨æ­¤ä¾›å¤‡å¿˜æŸ¥é˜…ã€‚

---

## Git ç›¸å…³ (Git Related)

### ä¿å­˜ Git ç™»å½•å‡­æ® (Caching Git Credentials)

æ¯æ¬¡ `git push` æˆ– `git pull` éƒ½è¦è¾“å…¥å¯†ç æ˜¯ä¸æ˜¯å¾ˆçƒ¦ï¼Ÿå¯ä»¥ä½¿ç”¨ Git çš„ `credential.helper` åŠŸèƒ½æ¥å¸®ä½ è®°ä½å¯†ç ã€‚

#### 1. ä¸´æ—¶ç¼“å­˜ (æ¨èï¼Œå®‰å…¨)

è¿™ä¸ªæ–¹æ³•ä¼šå°†ä½ çš„å¯†ç åœ¨å†…å­˜ä¸­ç¼“å­˜ä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤ 15 åˆ†é’Ÿï¼‰ã€‚å¯¹äºå¤§å¤šæ•°äººæ¥è¯´ï¼Œè¿™æ˜¯å®‰å…¨æ€§å’Œä¾¿åˆ©æ€§çš„æœ€ä½³å¹³è¡¡ç‚¹ã€‚

```sh
# å¼€å¯ç¼“å­˜åŠŸèƒ½
git config --global credential.helper cache

# (å¯é€‰) è®¾ç½®ç¼“å­˜æ—¶é—´ï¼Œæ¯”å¦‚1å°æ—¶ (3600ç§’)
git config --global credential.helper 'cache --timeout=3600'
```

å½“ä½ ä¸‹æ¬¡è¾“å…¥å¯†ç åï¼Œå®ƒå°±ä¼šåœ¨æŒ‡å®šæ—¶é—´å†…è¢«è®°ä½ã€‚

#### 2. æ°¸ä¹…å­˜å‚¨ (æ–¹ä¾¿ä½†æœ‰é£é™©)

è¿™ä¸ªæ–¹æ³•ä¼šå°†ä½ çš„ç”¨æˆ·åå’Œå¯†ç **ä»¥æ˜æ–‡å½¢å¼**å­˜å‚¨åœ¨ä½ çš„ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶é‡Œ (`~/.git-credentials`)ã€‚è™½ç„¶éå¸¸æ–¹ä¾¿ï¼Œä½†ä»»ä½•èƒ½è®¿é—®ä½ ç”µè„‘æ–‡ä»¶çš„äººéƒ½èƒ½çœ‹åˆ°ä½ çš„å¯†ç ã€‚

> ğŸš¨ **å®‰å…¨è­¦å‘Š:** è¯·åªåœ¨å®Œå…¨å—ä½ æ§åˆ¶ä¸”è¶³å¤Ÿå®‰å…¨çš„ä¸ªäººç”µè„‘ä¸Šä½¿ç”¨æ­¤æ–¹æ³•ã€‚ä¸è¦åœ¨å…±äº«æœåŠ¡å™¨æˆ–å…¬å…±ç”µè„‘ä¸Šä½¿ç”¨ï¼

```sh
# å¼€å¯æ°¸ä¹…å­˜å‚¨åŠŸèƒ½
git config --global credential.helper store
```

---

## Docker ç›¸å…³ (Docker Related)

### å¯åŠ¨ Qdrant å‘é‡æ•°æ®åº“ (Starting Qdrant Vector Database)

è¿™é‡Œæä¾›äº†ä¸¤ç§å¯åŠ¨ Qdrant çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯åŸºç¡€çš„ï¼Œå¦ä¸€ç§æ˜¯å¸¦æœ‰å®‰å…¨å¯†é’¥çš„ï¼Œä¸»äººå¯ä»¥æŒ‰éœ€é€‰æ‹©å“¦ã€‚

#### 1. åŸºç¡€å¯åŠ¨ (æ— å¯†é’¥)

ä¸€ä¸ªç”¨äºæœ¬åœ°å¼€å‘å’Œæµ‹è¯•çš„ Qdrant å¯åŠ¨å‘½ä»¤ã€‚å®ƒä¼šå°†æ•°æ®æŒä¹…åŒ–åˆ°å½“å‰ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”ä¼šåœ¨ Docker æœåŠ¡å¯åŠ¨æ—¶è‡ªåŠ¨é‡å¯ã€‚

```sh
docker run --name qdrant-basic \
  -p 6333:6333 \
  -p 6334:6334 \
  -v "$(pwd)/qdrant_storage:/qdrant/storage:z" \
  --restart unless-stopped \
  -d qdrant/qdrant
```

**å‘½ä»¤è¯¦è§£:**

- `--name qdrant-basic`: ç»™å®¹å™¨èµ·ä¸€ä¸ªå¥½è®°çš„åå­— (`qdrant-basic`)ã€‚
- `-p 6333:6333 -p 6334:6334`: å°†æœ¬æœºçš„ 6333 å’Œ 6334 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„å¯¹åº”ç«¯å£ã€‚
- `-v "$(pwd)/qdrant_storage:/qdrant/storage:z"`: å°† **å½“å‰ç›®å½•** ä¸‹çš„ `qdrant_storage` æ–‡ä»¶å¤¹æŒ‚è½½åˆ°å®¹å™¨å†…çš„ `/qdrant/storage` ç›®å½•ï¼Œè¿™æ ·å³ä½¿å®¹å™¨è¢«åˆ é™¤ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚
- `--restart unless-stopped`: é™¤éæ‰‹åŠ¨åœæ­¢ï¼Œå¦åˆ™å®¹å™¨æ€»æ˜¯åœ¨ Docker æœåŠ¡å¯åŠ¨æ—¶è‡ªåŠ¨é‡å¯ï¼Œä¿è¯æœåŠ¡å¯ç”¨æ€§ã€‚
- `-d`: åå°è¿è¡Œå®¹å™¨ã€‚
- `qdrant/qdrant`: ä½¿ç”¨å®˜æ–¹çš„ Qdrant é•œåƒã€‚

#### 2. å¯åŠ¨å¹¶å¯ç”¨ API å¯†é’¥

æ­¤å‘½ä»¤åœ¨åŸºç¡€ç‰ˆä¹‹ä¸Šå¢åŠ äº† API å¯†é’¥ä¿æŠ¤ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦æä¾›æ­£ç¡®çš„å¯†é’¥æ‰èƒ½è®¿é—®ã€‚

> ğŸš¨ **å®‰å…¨æç¤º:** è¯·åŠ¡å¿…å°† `your-secret-api-key` æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å¼ºå®‰å…¨å¯†é’¥ï¼

```sh
docker run --name qdrant-secure \
  -p 6333:6333 \
  -p 6334:6334 \
  -v "$(pwd)/qdrant_storage:/qdrant/storage:z" \
  -e QDRANT__SERVICE__API_KEY='your-secret-api-key' \
  --restart unless-stopped \
  -d qdrant/qdrant
```

**æ–°å¢å‘½ä»¤è¯¦è§£:**

- `-e QDRANT__SERVICE__API_KEY=...`: é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ¥å¯ç”¨å¹¶é…ç½® API å¯†é’¥ã€‚Qdrant ä¼šè‡ªåŠ¨è¯»å–è¿™ä¸ªå˜é‡å¹¶å¼€å¯å®‰å…¨éªŒè¯ã€‚

**è¿æ¥ç¤ºä¾‹ (ä½¿ç”¨ curl):**

```sh
# æ›¿æ¢æˆä½ çš„å¯†é’¥
export QDRANT_API_KEY="your-secret-api-key"

# æŸ¥è¯¢æ‰€æœ‰ collections
curl -X GET "http://localhost:6333/collections" \
  -H "api-key: ${QDRANT_API_KEY}"
```

### å¯åŠ¨ PostgreSQL æ•°æ®åº“

ä¸€ä¸ªç”¨äºæœ¬åœ°å¼€å‘å’Œæµ‹è¯•çš„ PostgreSQL å¯åŠ¨å‘½ä»¤ã€‚å®ƒä¼šå°†æ•°æ®æŒä¹…åŒ–ï¼Œå¹¶é…ç½®å¥½ç”¨æˆ·åã€å¯†ç å’Œæ•°æ®åº“åã€‚

```sh
# è¿è¡Œ PostgreSQL 15 å®¹å™¨
# è¯·åŠ¡å¿…å°† 'mysecretpassword' æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å¼ºå¯†ç ï¼
docker run --name my-postgres \
  -e POSTGRES_USER=myuser \
  -e POSTGRES_PASSWORD=mysecretpassword \
  -e POSTGRES_DB=mydb \
  -p 5432:5432 \
  -v my-postgres-data:/var/lib/postgresql/data \
  --restart unless-stopped \
  -d postgres:15
```

**å‘½ä»¤è¯¦è§£:**

- `--name my-postgres`: ç»™å®¹å™¨èµ·ä¸€ä¸ªå¥½è®°çš„åå­—ã€‚
- `-e POSTGRES_...`: è®¾ç½®ç¯å¢ƒå˜é‡æ¥åˆå§‹åŒ–æ•°æ®åº“ã€‚
  - `POSTGRES_USER`: è®¾ç½®æ•°æ®åº“ç”¨æˆ·åã€‚
  - `POSTGRES_PASSWORD`: è®¾ç½®ç”¨æˆ·å¯†ç ã€‚**ã€é‡è¦ã€‘**
  - `POSTGRES_DB`: åˆ›å»ºä¸€ä¸ªæŒ‡å®šåç§°çš„æ•°æ®åº“ã€‚
- `-p 5432:5432`: å°†æœ¬æœºçš„ 5432 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 5432 ç«¯å£ã€‚
- `-v my-postgres-data:/var/lib/postgresql/data`: åˆ›å»ºä¸€ä¸ªåä¸º `my-postgres-data` çš„ Docker å· (volume) å¹¶æŒ‚è½½åˆ°å®¹å™¨å†… PG çš„æ•°æ®ç›®å½•ï¼Œè¿™æ ·å³ä½¿å®¹å™¨è¢«åˆ é™¤ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚
- `--restart unless-stopped`: é™¤éæ‰‹åŠ¨åœæ­¢ï¼Œå¦åˆ™å®¹å™¨æ€»æ˜¯åœ¨ Docker æœåŠ¡å¯åŠ¨æ—¶è‡ªåŠ¨é‡å¯ã€‚
- `-d`: åå°è¿è¡Œå®¹å™¨ã€‚
- `postgres:15`: ä½¿ç”¨å®˜æ–¹çš„ PostgreSQL 15 é•œåƒã€‚

**è¿æ¥ç¤ºä¾‹:**

```sh
psql -h localhost -p 5432 -U myuser -d mydb
```

### æ¸…ç† Docker èµ„æº

æ¸…ç†æ‰æ‰€æœ‰æœªä½¿ç”¨çš„å®¹å™¨ã€ç½‘ç»œã€é•œåƒï¼ˆåŒ…æ‹¬æ‚¬ç©ºå’Œæœªè¢«ä½¿ç”¨çš„ï¼‰ã€‚

```sh
docker system prune -a --volumes
```

---
